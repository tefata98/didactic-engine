import{e as b,N as $,r as h,j as e,X as Y,L as X,C as p,i as D,B as T}from"./index-DWpuMBsw.js";import{G as k}from"./GlassCard-CZmjDEl9.js";import{P as Z}from"./PageHeader-Bg4WIRfj.js";import{B as L}from"./Badge-ZGFUSfQ_.js";import{E as J}from"./EmptyState-B658jc4V.js";import{u as E,l as M}from"./dateHelpers-ByHpLa8T.js";import{R as K}from"./refresh-cw-CpMWf_sa.js";import{C as v}from"./clock-BwsMik_c.js";import{S as W}from"./search-95Xu-NNF.js";import{T as ee}from"./trending-up-eWtF1Ze4.js";import{C as se}from"./chevron-left-K-jhRNzd.js";const te=b("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),g=b("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),ne=b("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),R=b("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ae=b("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),re="https://api.allorigins.win/get?url=",H={Sleep:"sleep+health+science+tips",Fitness:"fitness+workout+exercise+training",Finance:"personal+finance+investing+markets",Music:"music+industry+new+album+releases",Vocals:"singing+vocal+training+voice",Recruitment:"job+market+hiring+career+recruitment",Tech:"technology+AI+software+programming"};function ie(s){if(!s)return"";const d=document.createElement("div");return d.innerHTML=s,(d.textContent||d.innerText||"").trim()}function le(s){const m=new DOMParser().parseFromString(s,"text/xml").querySelectorAll("item");return Array.from(m).map(l=>{var a,r,n,x,u,j,w,f;return{title:((r=(a=l.querySelector("title"))==null?void 0:a.textContent)==null?void 0:r.trim())||"",link:((x=(n=l.querySelector("link"))==null?void 0:n.textContent)==null?void 0:x.trim())||"",description:ie(((u=l.querySelector("description"))==null?void 0:u.textContent)||""),pubDate:((j=l.querySelector("pubDate"))==null?void 0:j.textContent)||"",source:((f=(w=l.querySelector("source"))==null?void 0:w.textContent)==null?void 0:f.trim())||"News"}})}async function oe(s){const d=H[s];if(!d)return[];const o=`https://news.google.com/rss/search?q=${d}&hl=en-US&gl=US&ceid=US:en`,m=`${re}${encodeURIComponent(o)}`,l=await fetch(m);if(!l.ok)throw new Error(`Fetch failed: ${l.status}`);const a=await l.json();if(!a.contents)throw new Error("Empty response");return le(a.contents)}async function ce(){const s=Object.keys(H),d=await Promise.allSettled(s.map(a=>oe(a))),o=[];d.forEach((a,r)=>{a.status==="fulfilled"&&a.value.slice(0,4).forEach((n,x)=>{if(!n.title)return;const u=Math.max(2,Math.ceil(n.description.length/800));o.push({id:`${s[r]}-${x}-${Date.now()}`,title:n.title,summary:n.description||`Latest ${s[r].toLowerCase()} news from ${n.source}.`,content:null,category:s[r],tags:[s[r].toLowerCase(),n.source.toLowerCase().split(" ")[0]],source:n.source,readingTime:u,publishedAt:n.pubDate?new Date(n.pubDate).toISOString():new Date().toISOString(),url:n.link,featured:x===0})})});for(let a=o.length-1;a>0;a--){const r=Math.floor(Math.random()*(a+1));[o[a],o[r]]=[o[r],o[a]]}const m=o.filter(a=>a.featured),l=o.filter(a=>!a.featured);return[...m,...l]}const F={All:p.primary,Sleep:p.sleep,Fitness:p.fitness,Finance:p.finance,Music:"#f97316",Vocals:p.vocals,Recruitment:p.work,Tech:"#38bdf8"},P=["All","Sleep","Fitness","Finance","Music","Vocals","Recruitment","Tech"],de=60*60*1e3;function G({article:s,isBookmarked:d,onToggleBookmark:o,onShare:m,onSelect:l,featured:a=!1}){const r=F[s.category]||p.primary;return a?e.jsxs(k,{padding:"p-0",className:"overflow-hidden",children:[e.jsx("div",{className:"h-1.5",style:{background:`linear-gradient(90deg, ${r}, ${r}99)`}}),e.jsxs("div",{className:"p-5 cursor-pointer",onClick:()=>l(s),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(L,{color:r,children:s.category}),e.jsx("span",{className:"text-xs text-white/30",children:"Featured"}),s.readingTime&&e.jsxs("span",{className:"text-xs text-white/30 flex items-center gap-1 ml-auto",children:[e.jsx(T,{size:10}),s.readingTime," min read"]})]}),e.jsx("h3",{className:"font-heading font-bold text-white text-lg mb-2 leading-tight",children:s.title}),e.jsx("p",{className:"text-sm text-white/60 leading-relaxed mb-4",children:s.summary}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:s.tags.map(n=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs",style:{background:`${r}15`,color:`${r}cc`},children:n},n))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/40",children:s.source}),e.jsx("span",{className:"text-xs text-white/20",children:"|"}),e.jsxs("span",{className:"text-xs text-white/40 flex items-center gap-1",children:[e.jsx(v,{size:10}),M(s.publishedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),o(s.id)},className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:d?e.jsx(g,{size:18,style:{color:r},className:"fill-current"}):e.jsx(g,{size:18,className:"text-white/40"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),m(s)},className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(R,{size:18,className:"text-white/40"})})]})]})]})]}):e.jsx(k,{padding:"p-0",className:"overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-1 flex-shrink-0",style:{background:r}}),e.jsx("div",{className:"flex-1 p-4 cursor-pointer",onClick:()=>l(s),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx(L,{color:r,children:s.category}),s.readingTime&&e.jsxs("span",{className:"text-[10px] text-white/30 flex items-center gap-0.5",children:[e.jsx(T,{size:9}),s.readingTime,"m"]})]}),e.jsx("h4",{className:"font-medium text-white text-sm leading-tight mb-1.5",children:s.title}),e.jsx("p",{className:"text-xs text-white/50 leading-relaxed line-clamp-2 mb-2",children:s.summary}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:s.tags.slice(0,3).map(n=>e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px]",style:{background:`${r}10`,color:`${r}aa`},children:n},n))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/30",children:s.source}),e.jsx("span",{className:"text-xs text-white/15",children:"|"}),e.jsxs("span",{className:"text-xs text-white/30 flex items-center gap-1",children:[e.jsx(v,{size:9}),M(s.publishedAt)]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5 flex-shrink-0",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),o(s.id)},className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:d?e.jsx(g,{size:16,style:{color:r},className:"fill-current"}):e.jsx(g,{size:16,className:"text-white/30"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),m(s)},className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(R,{size:16,className:"text-white/30"})})]})]})})]})})}function xe({article:s,isBookmarked:d,onToggleBookmark:o,onShare:m,onClose:l}){var r;const a=F[s.category]||p.primary;return e.jsx("div",{className:"fixed inset-0 z-50 bg-[#0f172a] overflow-y-auto",onClick:l,children:e.jsxs("div",{className:"min-h-full",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#0f172a]/95 backdrop-blur-lg border-b border-white/5",children:e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 max-w-2xl mx-auto",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(se,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(s.id),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:d?e.jsx(g,{size:18,style:{color:a},className:"fill-current"}):e.jsx(g,{size:18,className:"text-white/40"})}),e.jsx("button",{onClick:()=>m(s),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(R,{size:18,className:"text-white/40"})})]})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-5 pt-6 pb-16",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(L,{color:a,children:s.category}),s.readingTime&&e.jsxs("span",{className:"text-xs text-white/40 flex items-center gap-1",children:[e.jsx(T,{size:12}),s.readingTime," min read"]})]}),e.jsx("h1",{className:"text-2xl font-heading font-bold text-white mb-4 leading-tight",children:s.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/40 mb-6 pb-6 border-b border-white/5",children:[e.jsx("span",{className:"font-medium text-white/60",children:s.source}),e.jsx("span",{className:"text-white/20",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{size:12}),M(s.publishedAt)]})]}),e.jsx("div",{className:"rounded-xl p-4 mb-6",style:{background:`${a}10`,borderLeft:`3px solid ${a}`},children:e.jsx("p",{className:"text-sm text-white/70 leading-relaxed italic",children:s.summary})}),s.content?e.jsx("div",{className:"prose prose-invert max-w-none",children:s.content.split(`

`).map((n,x)=>e.jsx("p",{className:"text-[15px] text-white/70 leading-relaxed mb-4",children:n},x))}):s.url&&s.url!=="#"?e.jsxs("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-5 py-3 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"},children:[e.jsx(ne,{size:16}),"Read Full Article"]}):null,e.jsxs("div",{className:"flex flex-wrap gap-2 mt-8 pt-6 border-t border-white/5",children:[e.jsx(ae,{size:14,className:"text-white/30"}),(r=s.tags)==null?void 0:r.map(n=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs",style:{background:`${a}15`,color:`${a}cc`},children:n},n))]})]})]})})}function ke(){const[s,d]=E($.news,"articles",[]),[o,m]=E($.news,"lastFetch",0),[l,a]=E($.news,"bookmarks",[]),[r,n]=h.useState("All"),[x,u]=h.useState(""),[j,w]=h.useState(null),[f,O]=h.useState(!1),[q,C]=h.useState(null),U=h.useCallback(async()=>{O(!0),C(null);try{const t=await ce();d(t),m(Date.now())}catch(t){C(t.message||"Failed to fetch articles")}finally{O(!1)}},[d,m]);h.useEffect(()=>{(s.length===0||Date.now()-o>de)&&U()},[]);const y=h.useMemo(()=>{let t=s;if(r!=="All"&&(t=t.filter(i=>i.category===r)),x.trim()){const i=x.toLowerCase();t=t.filter(c=>{var N;return c.title.toLowerCase().includes(i)||c.summary.toLowerCase().includes(i)||((N=c.tags)==null?void 0:N.some(Q=>Q.toLowerCase().includes(i)))})}return t},[s,r,x]),B=h.useMemo(()=>y.filter(t=>t.featured),[y]),S=h.useMemo(()=>y.filter(t=>!t.featured),[y]);function A(t){a(i=>i.includes(t)?i.filter(c=>c!==t):[...i,t])}function z(t){navigator.share?navigator.share({title:t.title,text:t.summary,url:t.url||window.location.href}).catch(()=>{}):navigator.clipboard.writeText(`${t.title}
${t.summary}`).then(()=>{const i=document.createElement("div");i.textContent="Copied to clipboard!",i.className="fixed bottom-24 left-1/2 -translate-x-1/2 glass-card-sm px-4 py-2 text-sm text-white z-50",document.body.appendChild(i),setTimeout(()=>i.remove(),2e3)}).catch(()=>{})}const V=l.length,I=h.useMemo(()=>{const t={};return P.forEach(i=>{i==="All"?t[i]=s.length:t[i]=s.filter(c=>c.category===i).length}),t},[s]),_=h.useMemo(()=>{if(!o)return null;const t=Date.now()-o,i=Math.floor(t/6e4);if(i<1)return"Updated just now";if(i<60)return`Updated ${i}m ago`;const c=Math.floor(i/60);return c<24?`Updated ${c}h ago`:`Updated ${Math.floor(c/24)}d ago`},[o]);return j?e.jsx(xe,{article:j,isBookmarked:l.includes(j.id),onToggleBookmark:A,onShare:z,onClose:()=>w(null)}):e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsx(Z,{title:"News Feed",subtitle:"Curated articles for your interests",rightElement:e.jsxs("button",{onClick:U,disabled:f,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-indigo-500/15 hover:bg-indigo-500/25 border border-indigo-500/20 transition-all disabled:opacity-50",children:[e.jsx(K,{size:14,className:`text-indigo-400 ${f?"animate-spin":""}`}),e.jsx("span",{className:"text-xs font-medium text-indigo-400",children:"Refresh"})]})}),s.length>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/30 px-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(v,{size:11}),_]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(g,{size:11}),V," saved"]})]}),q&&e.jsx(k,{className:"border border-red-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{size:18,className:"text-red-400 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm text-red-400",children:q})}),e.jsx("button",{onClick:()=>C(null),className:"text-white/40 hover:text-white/60",children:e.jsx(Y,{size:16})})]})}),f&&e.jsxs(k,{className:"text-center py-8",children:[e.jsx(X,{size:24,className:"text-indigo-400 mx-auto mb-3 animate-spin"}),e.jsx("p",{className:"text-sm text-white/50",children:"Generating personalized articles..."})]}),s.length>0&&e.jsxs("div",{className:"sticky top-0 z-30 -mx-5 px-5 pt-2 pb-3 bg-[#0f172a]/95 backdrop-blur-lg",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(W,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{type:"text",value:x,onChange:t=>u(t.target.value),placeholder:"Search articles...",className:"glass-input text-sm pl-10"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:P.map(t=>{const i=F[t],c=r===t,N=I[t];return e.jsxs("button",{onClick:()=>n(t),className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all flex-shrink-0 ${c?"text-white shadow-lg":"text-white/50 hover:text-white/70"}`,style:{background:c?`${i}30`:"rgba(255,255,255,0.04)",border:`1px solid ${c?`${i}50`:"rgba(255,255,255,0.06)"}`,color:c?i:void 0,boxShadow:c?`0 2px 12px ${i}20`:"none"},children:[t,N>0&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full font-bold",style:{background:c?`${i}30`:"rgba(255,255,255,0.08)"},children:N})]},t)})})]}),B.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(ee,{size:16,className:"text-indigo-400"}),"Featured"]}),e.jsx("div",{className:"space-y-3",children:B.map(t=>e.jsx(G,{article:t,isBookmarked:l.includes(t.id),onToggleBookmark:A,onShare:z,onSelect:w,featured:!0},t.id))})]}),S.length>0?e.jsxs("div",{children:[e.jsxs("h3",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(D,{size:16,className:"text-white/40"}),"Latest Articles",e.jsxs("span",{className:"text-xs text-white/30 font-normal",children:["(",S.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:S.map(t=>e.jsx(G,{article:t,isBookmarked:l.includes(t.id),onToggleBookmark:A,onShare:z,onSelect:w},t.id))})]}):!f&&s.length>0&&y.length===0&&e.jsx(J,{icon:D,title:"No articles found",description:x?`No articles match "${x}"`:`No articles in ${r} category`,action:{label:"View All",onClick:()=>{n("All"),u("")}}})]})}export{ke as default};
