import{u as _,a as D,N as A,r as L,D as X,C as o,M as Y,b as H,c as z,j as e,d as q,B as I}from"./index-DWpanXyB.js";import{G as w}from"./GlassCard-bp6vyS7Q.js";import{P as Q}from"./ProgressRing-DynLOyWS.js";import{A as F}from"./AnimatedNumber-DzPYma7_.js";import{S as J}from"./Sparkline-wOdAoK2X.js";import{P as U}from"./ProgressBar-BjAeTfzj.js";import{u as j,g as i,a as Z,b as ee,f as se}from"./dateHelpers-Bt1eYNZf.js";import{B as te}from"./brain-C1oqwA8f.js";import{B as ne}from"./bell-C_Sti76Y.js";import{R as oe,X as le,T as ae}from"./CartesianChart-BSGO7dyN.js";import{B as re,a as ie}from"./BarChart-XK_cj_5i.js";const ce=[{icon:H,label:"Workout",path:"/fitness",color:o.fitness},{icon:q,label:"Vocals",path:"/vocals",color:o.vocals},{icon:z,label:"Expense",path:"/finance",color:o.finance},{icon:I,label:"Book",path:"/reading",color:o.reading}];function de(){const u=new Date().getHours();return u<12?"Good morning":u<18?"Good afternoon":"Good evening"}function xe({active:u,payload:c,label:k}){return!u||!(c!=null&&c.length)?null:e.jsxs("div",{className:"glass-card-sm px-3 py-2 text-xs",children:[e.jsx("p",{className:"text-white/50",children:k}),e.jsxs("p",{className:"text-white font-medium",children:[c[0].value,"%"]})]})}function Ne(){const{state:u}=_(),c=D(),k=u.notifications.filter(s=>!s.read).length,[B]=j("lifeos_planner","tasks",{}),[d]=j(A.sleep,null,{entries:[]}),[f]=j(A.finance,null,{income:{},expenses:[]}),[N]=j(A.reading,null,{books:[],readingLog:[]}),[x]=j(A.fitness,null,{workoutLogs:{}}),[b]=j("lifeos_vocals","practiceLog",[]),O=i(),T=B[O]||[],a=Z(new Date),G=ee(),W=L.useMemo(()=>a.map((s,r)=>{const h=i(s),l=B[h]||[],p=l.filter(v=>v.done).length,S=l.length>0?Math.round(p/l.length*100):0;return{day:X[r],value:S}}),[B,a]),V=L.useMemo(()=>{const s=(d==null?void 0:d.entries)||[],r=s.length>0?s[s.length-1]:null,h=r?Math.min(100,Math.round(r.duration/8*100)):0,l=s.slice(-7).map(n=>Math.round(n.duration/8*100)),p=(x==null?void 0:x.workoutLogs)||{},S=a.filter(n=>p[i(n)]).length,v=a.map(n=>p[i(n)]?100:0);a.filter(n=>{const g=i(n);return b.some(C=>C.date===g)}).length;const t=a.map(n=>{const g=i(n),C=b.filter(E=>E.date===g);return C.length>0?Math.round(C.reduce((E,$)=>E+($.duration||0),0)/60):0}),P=((f==null?void 0:f.expenses)||[]).filter(n=>n.month===G).reduce((n,g)=>n+g.amount,0),R=((f==null?void 0:f.income)||{})[G]||0,K=R>0?Math.round((R-P)/R*100):0;return[{label:"Sleep Score",value:h,suffix:"%",icon:Y,color:o.sleep,trend:0,data:l.length>0?l:[0]},{label:"Workouts",value:S,suffix:"/wk",icon:H,color:o.fitness,trend:0,data:v},{label:"Vocal Mins",value:t.reduce((n,g)=>n+g,0),suffix:"m",icon:te,color:o.vocals,trend:0,data:t.length>0?t:[0]},{label:"Savings Rate",value:Math.max(0,K),suffix:"%",icon:z,color:o.finance,trend:0,data:[Math.max(0,K)]}]},[d,x,b,f,a,G]),y=L.useMemo(()=>{const s=(x==null?void 0:x.workoutLogs)||{},r=a.filter(t=>s[i(t)]).length,l=((N==null?void 0:N.readingLog)||[]).filter(t=>a.some(m=>i(m)===t.date)).reduce((t,m)=>t+(m.pages||0),0),p=a.filter(t=>{const m=i(t);return b.some(P=>P.date===m)}).length,v=((d==null?void 0:d.entries)||[]).filter(t=>a.some(m=>i(m)===t.date)).filter(t=>t.duration>=7).length;return[{label:"Resistance Band Sessions",current:r,target:3,color:o.fitness},{label:"Pages Read",current:l,target:100,color:o.reading},{label:"Vocal Practice",current:p,target:5,color:o.vocals},{label:"Sleep 7+ Hours",current:v,target:7,color:o.sleep}]},[x,N,b,d,a]),M=L.useMemo(()=>{const s=y.reduce((h,l)=>h+l.target,0),r=y.reduce((h,l)=>h+Math.min(l.current,l.target),0);return s>0?Math.round(r/s*100):0},[y]);return e.jsxs("div",{className:"space-y-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-heading font-bold text-white",children:[de(),", ",u.user.name]}),e.jsx("p",{className:"text-sm text-white/50 mt-1",children:se()})]}),e.jsxs("button",{className:"relative w-10 h-10 rounded-xl bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",children:[e.jsx(ne,{size:20,className:"text-white/70"}),k>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-gradient-to-br from-indigo-500 to-violet-500 text-[10px] font-bold flex items-center justify-center",children:k})]})]}),e.jsxs(w,{className:"flex items-center gap-6",children:[e.jsx(Q,{value:M,size:100,strokeWidth:8,label:`${M}%`,sublabel:"Weekly"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading font-semibold text-white mb-1",children:"Overall Progress"}),e.jsx("p",{className:"text-sm text-white/50",children:M===0?"Start tracking to see your progress!":M>=70?"You're on track this week. Keep it up!":"Keep going, you can do it!"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:V.map(s=>e.jsxs(w,{padding:"p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("div",{className:"w-9 h-9 rounded-xl flex items-center justify-center",style:{background:`${s.color}20`},children:e.jsx(s.icon,{size:18,style:{color:s.color}})})}),e.jsx("div",{className:"text-xl font-heading font-bold text-white mb-0.5",children:e.jsx(F,{value:Math.floor(s.value),suffix:s.suffix||""})}),e.jsx("p",{className:"text-xs text-white/40 mb-3",children:s.label}),e.jsx(J,{data:s.data,color:s.color,width:120,height:28})]},s.label))}),e.jsxs(w,{children:[e.jsx("h3",{className:"font-heading font-semibold text-white mb-4",children:"Weekly Activity"}),W.some(s=>s.value>0)?e.jsx(oe,{width:"100%",height:140,children:e.jsxs(re,{data:W,children:[e.jsx(le,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"rgba(255,255,255,0.4)",fontSize:12}}),e.jsx(ae,{content:e.jsx(xe,{}),cursor:!1}),e.jsx(ie,{dataKey:"value",radius:[6,6,0,0],fill:"url(#barGradient)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#6366f1"}),e.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})})]})}):e.jsx("div",{className:"py-8 text-center",children:e.jsx("p",{className:"text-sm text-white/30",children:"Add tasks in Planner to see your weekly activity"})})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-heading font-semibold text-white",children:"Today's Plan"}),e.jsx("button",{onClick:()=>c("/planner"),className:"text-xs text-indigo-400 hover:text-indigo-300",children:"View All"})]}),T.length>0?e.jsx("div",{className:"space-y-3",children:T.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-white/40 w-12 flex-shrink-0",children:s.time}),e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:o[s.category]||o.primary}}),e.jsx("span",{className:`text-sm ${s.done?"text-white/40 line-through":"text-white/80"}`,children:s.title})]},r))}):e.jsxs("div",{className:"py-4 text-center",children:[e.jsx("p",{className:"text-sm text-white/30",children:"No tasks planned for today"}),e.jsx("button",{onClick:()=>c("/planner"),className:"text-xs text-indigo-400 mt-2",children:"Add tasks"})]})]}),e.jsxs(w,{children:[e.jsx("h3",{className:"font-heading font-semibold text-white mb-4",children:"This Week's Goals"}),e.jsx("div",{className:"space-y-4",children:y.map(s=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[e.jsx("span",{className:"text-white/70",children:s.label}),e.jsxs("span",{className:"text-white/50",children:[s.current,"/",s.target]})]}),e.jsx(U,{value:s.current,max:s.target,color:s.color,height:6})]},s.label))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-heading font-semibold text-white mb-3",children:"Quick Actions"}),e.jsx("div",{className:"flex gap-3",children:ce.map(s=>e.jsxs("button",{onClick:()=>c(s.path),className:"flex flex-col items-center gap-2 flex-1 active:scale-95 transition-transform",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center",style:{background:`${s.color}15`},children:e.jsx(s.icon,{size:24,style:{color:s.color}})}),e.jsx("span",{className:"text-xs text-white/60",children:s.label})]},s.label))})]})]})}export{Ne as default};
