import{e as W,N as te,r as c,j as e,B as k,f as se,X as H}from"./index-4wya-6k_.js";import{G as w}from"./GlassCard-CnwA8Pzd.js";import{P as ae}from"./PageHeader-B9TG-7vG.js";import{a as le,T as ie}from"./TabBar-nBdDIq55.js";import{P as T}from"./ProgressBar-COEDAexp.js";import{B as F}from"./Badge-CPP3ANrc.js";import{E as ne}from"./EmptyState-AMKGpXw9.js";import{F as oe}from"./FloatingActionButton-C61y38cj.js";import{A as L}from"./AnimatedNumber-ASitS_5e.js";import{u as re,g as b}from"./dateHelpers-8vpAHzVp.js";import{P as ce}from"./pen-line-DG-ephLw.js";import{F as de}from"./flame-DyRSM5Yl.js";import{C as K}from"./check-CELrdmsw.js";import{T as me}from"./trash-2-CZmobZM4.js";import{P as he}from"./plus-C_a6ygpE.js";const xe=W("BookMarked",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["polyline",{points:"10 2 10 10 13 7 16 10 16 2",key:"13o6vz"}]]),ge=W("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),o="#c084fc",A={Sleep:["#818cf8","#6366f1"],Habits:["#a78bfa","#7c3aed"],Creativity:["#f472b6","#ec4899"],Music:["#fb923c","#f97316"],Recruitment:["#38bdf8","#0ea5e9"],Psychology:["#34d399","#10b981"],Health:["#f59e0b","#d97706"],Finance:["#22c55e","#16a34a"],Vocals:["#ec4899","#db2777"],Fiction:["#c084fc","#a855f7"],Science:["#60a5fa","#3b82f6"],Technology:["#6366f1","#4f46e5"],Other:["#94a3b8","#64748b"]},ue=[{id:"wtr-1",title:"Why We Sleep",author:"Matthew Walker",category:"Sleep",totalPages:368,pagesRead:0,shelf:"want"},{id:"wtr-2",title:"Atomic Habits",author:"James Clear",category:"Habits",totalPages:320,pagesRead:0,shelf:"want"},{id:"wtr-3",title:"The War of Art",author:"Steven Pressfield",category:"Creativity",totalPages:190,pagesRead:0,shelf:"want"},{id:"wtr-4",title:"Effortless Mastery",author:"Kenny Werner",category:"Music",totalPages:256,pagesRead:0,shelf:"want"},{id:"wtr-5",title:"Who",author:"Geoff Smart",category:"Recruitment",totalPages:208,pagesRead:0,shelf:"want"},{id:"wtr-6",title:"Thinking, Fast and Slow",author:"Daniel Kahneman",category:"Psychology",totalPages:499,pagesRead:0,shelf:"want"},{id:"wtr-7",title:"The Talent Delusion",author:"Tomas Chamorro-Premuzic",category:"Recruitment",totalPages:272,pagesRead:0,shelf:"want"},{id:"wtr-8",title:"The Body Keeps the Score",author:"Bessel van der Kolk",category:"Health",totalPages:464,pagesRead:0,shelf:"want"},{id:"wtr-9",title:"The Psychology of Money",author:"Morgan Housel",category:"Finance",totalPages:256,pagesRead:0,shelf:"want"},{id:"wtr-10",title:"I Will Teach You to Be Rich",author:"Ramit Sethi",category:"Finance",totalPages:352,pagesRead:0,shelf:"want"},{id:"wtr-11",title:"Singing for the Stars",author:"Seth Riggs",category:"Vocals",totalPages:128,pagesRead:0,shelf:"want"}],pe={books:[...ue],readingLog:[],dailyGoal:{minutes:15,pages:20}},fe=[{id:"reading",label:"Currently Reading",icon:k},{id:"want",label:"Want to Read",icon:xe},{id:"completed",label:"Completed",icon:K}];function O({category:P,size:x="md"}){const r=A[P]||A.Other,B=x==="lg"?"w-20 h-28":x==="sm"?"w-10 h-14":"w-14 h-20";return e.jsx("div",{className:`${B} rounded-lg flex items-center justify-center flex-shrink-0`,style:{background:`linear-gradient(135deg, ${r[0]}, ${r[1]})`,boxShadow:`0 4px 12px ${r[0]}30`},children:e.jsx(k,{size:x==="lg"?24:x==="sm"?12:16,className:"text-white/80"})})}function Ae(){const[P,x]=re(te.reading,null,pe),[r,B]=c.useState("reading"),[Y,N]=c.useState(!1),[_,v]=c.useState(!1),[d,R]=c.useState({title:"",author:"",totalPages:"",category:"Other"}),[m,S]=c.useState({bookId:"",pages:"",minutes:"",date:b()}),u=P.books||[],g=P.readingLog||[],p=P.dailyGoal||{minutes:15,pages:20},C=c.useMemo(()=>u.filter(t=>t.shelf==="reading"),[u]),z=c.useMemo(()=>u.filter(t=>t.shelf==="want"),[u]),M=c.useMemo(()=>u.filter(t=>t.shelf==="completed"),[u]),E=c.useMemo(()=>r==="reading"?C:r==="want"?z:M,[r,C,z,M]),D=c.useMemo(()=>{let t=0;const s=new Date;for(let a=0;a<365;a++){const i=b(new Date(s.getTime()-a*864e5));if(g.filter(l=>l.date===i).reduce((l,j)=>l+(j.minutes||0),0)>=15)t++;else{if(a>0)break;break}}return t},[g]),f=c.useMemo(()=>{const t=b(),s=g.filter(n=>n.date===t),a=s.reduce((n,h)=>n+(h.pages||0),0),i=s.reduce((n,h)=>n+(h.minutes||0),0);return{pagesRead:a,minutesRead:i}},[g]),I=c.useMemo(()=>{const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),a=g.filter(y=>new Date(y.date)>=s),i=a.reduce((y,ee)=>y+(ee.pages||0),0),n=new Set(a.map(y=>y.date)).size,h=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),l=t.getDate(),j=l>0?Math.round(i/l):0;return{totalPages:i,daysWithReading:n,avgPagesPerDay:j,daysInMonth:h}},[g]),q=c.useMemo(()=>{const t=new Date().getFullYear();return M.filter(s=>s.completedDate&&new Date(s.completedDate).getFullYear()===t).length},[M]);function V(t){if(t.preventDefault(),!d.title.trim()||!d.author.trim()||!d.totalPages)return;const s={id:`book-${Date.now()}`,title:d.title.trim(),author:d.author.trim(),totalPages:parseInt(d.totalPages,10),pagesRead:0,category:d.category,shelf:"want"};x(a=>({...a,books:[...a.books,s]})),R({title:"",author:"",totalPages:"",category:"Other"}),N(!1)}function U(t){if(t.preventDefault(),!m.bookId||!m.pages)return;const s=parseInt(m.pages,10),a=parseInt(m.minutes,10)||0,i={id:`log-${Date.now()}`,bookId:m.bookId,pages:s,minutes:a,date:m.date};x(n=>{const h=n.books.map(l=>{if(l.id===m.bookId){const j=Math.min(l.pagesRead+s,l.totalPages),y=j>=l.totalPages;return{...l,pagesRead:j,shelf:y?"completed":l.shelf,completedDate:y?b():l.completedDate}}return l});return{...n,books:h,readingLog:[...n.readingLog,i]}}),S({bookId:"",pages:"",minutes:"",date:b()}),v(!1)}function $(t,s){x(a=>({...a,books:a.books.map(i=>i.id===t?{...i,shelf:s,startDate:s==="reading"?b():i.startDate,completedDate:s==="completed"?b():void 0,pagesRead:s==="completed"?i.totalPages:i.pagesRead}:i)}))}function J(t){x(s=>({...s,books:s.books.filter(a=>a.id!==t),readingLog:s.readingLog.filter(a=>a.bookId!==t)}))}const G=c.useMemo(()=>[...g].sort((t,s)=>s.date.localeCompare(t.date)).slice(0,10).map(t=>{const s=u.find(a=>a.id===t.bookId);return{...t,bookTitle:(s==null?void 0:s.title)||"Unknown"}}),[g,u]),X=Math.min(Math.round(f.pagesRead/p.pages*100),100),Q=Math.min(Math.round(f.minutesRead/p.minutes*100),100),Z=["Other","Sleep","Habits","Creativity","Music","Recruitment","Psychology","Health","Finance","Vocals","Fiction","Science","Technology"];return e.jsxs("div",{className:"space-y-6 pb-4",children:[e.jsx(ae,{title:"Reading",subtitle:`${D>0?`${D}-day streak`:"Start your streak today"}`,rightElement:e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium transition-all",style:{background:`${o}20`,color:o},children:[e.jsx(ce,{size:16}),"Log"]})}),e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-heading font-semibold text-white flex items-center gap-2",children:[e.jsx(le,{size:18,style:{color:o}}),"Daily Reading Goal"]}),f.pagesRead>=p.pages&&f.minutesRead>=p.minutes&&e.jsx(F,{color:"#22c55e",children:"Goal Met"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[e.jsx("span",{className:"text-white/70",children:"Pages"}),e.jsxs("span",{className:"text-white/50",children:[f.pagesRead,"/",p.pages]})]}),e.jsx(T,{value:f.pagesRead,max:p.pages,color:o,height:6}),e.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[X,"% complete"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[e.jsx("span",{className:"text-white/70",children:"Minutes"}),e.jsxs("span",{className:"text-white/50",children:[f.minutesRead,"/",p.minutes," min"]})]}),e.jsx(T,{value:f.minutesRead,max:p.minutes,color:"#a78bfa",height:6}),e.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[Q,"% complete"]})]})]})]}),C.length>0&&e.jsxs(w,{children:[e.jsxs("h3",{className:"font-heading font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(k,{size:18,style:{color:o}}),"Currently Reading"]}),e.jsx("div",{className:"space-y-4",children:C.map(t=>{var a;const s=Math.round(t.pagesRead/t.totalPages*100);return e.jsxs("div",{className:"flex gap-4",children:[e.jsx(O,{category:t.category,size:"lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-heading font-semibold text-white text-base truncate",children:t.title}),e.jsx("p",{className:"text-sm text-white/50 mb-1",children:t.author}),e.jsx(F,{color:((a=A[t.category])==null?void 0:a[0])||"#94a3b8",variant:"outlined",children:t.category}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-white/50 mb-1",children:[e.jsxs("span",{children:["Page ",t.pagesRead," of ",t.totalPages]}),e.jsxs("span",{children:[s,"%"]})]}),e.jsx(T,{value:t.pagesRead,max:t.totalPages,color:o,height:5})]})]})]},t.id)})})]}),e.jsx(w,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:`${o}20`},children:e.jsx(de,{size:24,style:{color:o}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/50",children:"Reading Streak"}),e.jsxs("p",{className:"text-2xl font-heading font-bold text-white",children:[e.jsx(L,{value:D})," ",D===1?"day":"days"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-white/40",children:"Goal: 15+ min/day"}),e.jsx("div",{className:"flex gap-1 mt-1",children:Array.from({length:7},(t,s)=>{const a=b(new Date(Date.now()-(6-s)*864e5)),n=g.filter(l=>l.date===a).reduce((l,j)=>l+(j.minutes||0),0),h=n>=15;return e.jsx("div",{className:"w-4 h-4 rounded-sm",style:{background:h?o:"rgba(255,255,255,0.06)"},title:`${a}: ${n} min`},s)})})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(w,{padding:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-heading font-bold text-white",children:e.jsx(L,{value:q})}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Books This Year"})]})}),e.jsx(w,{padding:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-heading font-bold text-white",children:e.jsx(L,{value:I.totalPages})}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Pages This Month"})]})}),e.jsx(w,{padding:"p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-heading font-bold text-white",children:e.jsx(L,{value:I.avgPagesPerDay})}),e.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Avg Pages/Day"})]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(ge,{size:18,style:{color:o}}),"Library"]}),e.jsx(ie,{tabs:fe,activeTab:r,onChange:B}),E.length===0?e.jsx(ne,{icon:k,title:`No books ${r==="reading"?"being read":r==="want"?"on your list":"completed yet"}`,description:"Add a book to get started",action:{label:"Add Book",onClick:()=>N(!0)}}):e.jsx("div",{className:"space-y-3",children:E.map(t=>{var a;const s=t.totalPages>0?Math.round(t.pagesRead/t.totalPages*100):0;return e.jsx(w,{padding:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(O,{category:t.category}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-medium text-white text-sm truncate",children:t.title}),e.jsx("p",{className:"text-xs text-white/50",children:t.author})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r==="want"&&e.jsx("button",{onClick:()=>$(t.id,"reading"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Start reading",children:e.jsx(k,{size:14,className:"text-white/50"})}),r==="reading"&&e.jsx("button",{onClick:()=>$(t.id,"completed"),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Mark completed",children:e.jsx(K,{size:14,className:"text-white/50"})}),e.jsx("button",{onClick:()=>J(t.id),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Remove",children:e.jsx(me,{size:14,className:"text-white/30 hover:text-red-400"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx(F,{color:((a=A[t.category])==null?void 0:a[0])||"#94a3b8",variant:"outlined",children:t.category}),e.jsxs("span",{className:"text-xs text-white/30",children:[t.totalPages," pages"]})]}),(r==="reading"||r==="completed")&&e.jsxs("div",{className:"mt-2",children:[e.jsx(T,{value:t.pagesRead,max:t.totalPages,color:o,height:4}),e.jsxs("p",{className:"text-xs text-white/40 mt-1",children:[t.pagesRead,"/",t.totalPages," pages (",s,"%)"]})]})]})]})},t.id)})})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-heading font-semibold text-white flex items-center gap-2",children:[e.jsx(se,{size:18,style:{color:o}}),"Reading Log"]}),e.jsx("button",{onClick:()=>v(!0),className:"text-xs font-medium transition-colors",style:{color:o},children:"+ Log Session"})]}),G.length===0?e.jsx("p",{className:"text-sm text-white/40 text-center py-4",children:"No reading sessions logged yet"}):e.jsx("div",{className:"space-y-2",children:G.map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{background:`${o}15`},children:e.jsx(k,{size:14,style:{color:o}})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white/80",children:t.bookTitle}),e.jsx("p",{className:"text-xs text-white/40",children:t.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-white",children:[t.pages," pages"]}),t.minutes>0&&e.jsxs("p",{className:"text-xs text-white/40",children:[t.minutes," min"]})]})]},t.id))})]}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>N(!1),children:e.jsxs("div",{className:"glass-card w-full max-w-md p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"font-heading font-semibold text-white text-lg",children:"Add Book"}),e.jsx("button",{onClick:()=>N(!1),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(H,{size:20,className:"text-white/50"})})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Title"}),e.jsx("input",{type:"text",value:d.title,onChange:t=>R(s=>({...s,title:t.target.value})),className:"glass-input text-sm",placeholder:"Book title",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Author"}),e.jsx("input",{type:"text",value:d.author,onChange:t=>R(s=>({...s,author:t.target.value})),className:"glass-input text-sm",placeholder:"Author name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Total Pages"}),e.jsx("input",{type:"number",value:d.totalPages,onChange:t=>R(s=>({...s,totalPages:t.target.value})),className:"glass-input text-sm",placeholder:"e.g. 320",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Category"}),e.jsx("select",{value:d.category,onChange:t=>R(s=>({...s,category:t.target.value})),className:"glass-input text-sm appearance-none",children:Z.map(t=>e.jsx("option",{value:t,className:"bg-slate-800",children:t},t))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>N(!1),className:"btn-ghost flex-1 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 text-sm",children:"Add Book"})]})]})]})}),_&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:()=>v(!1),children:e.jsxs("div",{className:"glass-card w-full max-w-md p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("h3",{className:"font-heading font-semibold text-white text-lg",children:"Log Reading Session"}),e.jsx("button",{onClick:()=>v(!1),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(H,{size:20,className:"text-white/50"})})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Book"}),e.jsxs("select",{value:m.bookId,onChange:t=>S(s=>({...s,bookId:t.target.value})),className:"glass-input text-sm appearance-none",required:!0,children:[e.jsx("option",{value:"",className:"bg-slate-800",children:"Select a book"}),C.map(t=>e.jsx("option",{value:t.id,className:"bg-slate-800",children:t.title},t.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Pages Read"}),e.jsx("input",{type:"number",value:m.pages,onChange:t=>S(s=>({...s,pages:t.target.value})),className:"glass-input text-sm",placeholder:"e.g. 25",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Minutes"}),e.jsx("input",{type:"number",value:m.minutes,onChange:t=>S(s=>({...s,minutes:t.target.value})),className:"glass-input text-sm",placeholder:"e.g. 30",min:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-white/50 mb-1.5 block",children:"Date"}),e.jsx("input",{type:"date",value:m.date,onChange:t=>S(s=>({...s,date:t.target.value})),className:"glass-input text-sm"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"btn-ghost flex-1 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-primary flex-1 text-sm",children:"Log Session"})]})]})]})}),e.jsx(oe,{onClick:()=>N(!0),icon:he})]})}export{Ae as default};
