import{e as b,N as $,r as h,j as e,X as Y,L as X,C as N,i as P,B as E}from"./index-DPMPy1jo.js";import{G as k}from"./GlassCard-BGTSY6va.js";import{P as K}from"./PageHeader-BGuk2ej9.js";import{B as L}from"./Badge-B7z873hl.js";import{E as Z}from"./EmptyState-B_rhCO7X.js";import{u as T,l as q}from"./dateHelpers-CFm0bNkn.js";import{R as J}from"./refresh-cw-C0PwWbxb.js";import{C as v}from"./clock-BX-L6_z5.js";import{S as W}from"./search-Cveyhl9e.js";import{T as ee}from"./trending-up-CfTpBCMt.js";import{C as te}from"./chevron-left-DO1HNzHI.js";const se=b("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),g=b("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),ae=b("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),M=b("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ne=b("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),re="https://api.allorigins.win/get?url=",G={"Talent Acquisition":"talent+acquisition+recruiting+hiring+HR",Singing:"singing+vocal+training+voice+technique","ЦСКА София":"ЦСКА+София+CSKA+Sofia+football",Tech:"technology+AI+software+programming"};function ie(t){if(!t)return"";const d=document.createElement("div");return d.innerHTML=t,(d.textContent||d.innerText||"").trim()}function le(t){const m=new DOMParser().parseFromString(t,"text/xml").querySelectorAll("item");return Array.from(m).map(l=>{var n,r,a,x,p,f,j,u;return{title:((r=(n=l.querySelector("title"))==null?void 0:n.textContent)==null?void 0:r.trim())||"",link:((x=(a=l.querySelector("link"))==null?void 0:a.textContent)==null?void 0:x.trim())||"",description:ie(((p=l.querySelector("description"))==null?void 0:p.textContent)||""),pubDate:((f=l.querySelector("pubDate"))==null?void 0:f.textContent)||"",source:((u=(j=l.querySelector("source"))==null?void 0:j.textContent)==null?void 0:u.trim())||"News"}})}async function oe(t){const d=G[t];if(!d)return[];const o=`https://news.google.com/rss/search?q=${d}&hl=en-US&gl=US&ceid=US:en`,m=`${re}${encodeURIComponent(o)}`,l=await fetch(m);if(!l.ok)throw new Error(`Fetch failed: ${l.status}`);const n=await l.json();if(!n.contents)throw new Error("Empty response");return le(n.contents)}async function ce(){const t=Object.keys(G),d=await Promise.allSettled(t.map(n=>oe(n))),o=[];d.forEach((n,r)=>{n.status==="fulfilled"&&n.value.slice(0,4).forEach((a,x)=>{if(!a.title)return;const p=Math.max(2,Math.ceil(a.description.length/800));o.push({id:`${t[r]}-${x}-${Date.now()}`,title:a.title,summary:a.description||`Latest ${t[r].toLowerCase()} news from ${a.source}.`,content:null,category:t[r],tags:[t[r].toLowerCase(),a.source.toLowerCase().split(" ")[0]],source:a.source,readingTime:p,publishedAt:a.pubDate?new Date(a.pubDate).toISOString():new Date().toISOString(),url:a.link,featured:x===0})})});for(let n=o.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[o[n],o[r]]=[o[r],o[n]]}const m=o.filter(n=>n.featured),l=o.filter(n=>!n.featured);return[...m,...l]}const R={All:N.primary,"Talent Acquisition":N.work,Singing:N.vocals,"ЦСКА София":"#d32f2f",Tech:"#38bdf8"},F=["All","Talent Acquisition","Singing","ЦСКА София","Tech"],de=60*60*1e3;function H({article:t,isBookmarked:d,onToggleBookmark:o,onShare:m,onSelect:l,featured:n=!1}){const r=R[t.category]||N.primary;return n?e.jsxs(k,{padding:"p-0",className:"overflow-hidden",children:[e.jsx("div",{className:"h-1.5",style:{background:`linear-gradient(90deg, ${r}, ${r}99)`}}),e.jsxs("div",{className:"p-5 cursor-pointer",onClick:()=>l(t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(L,{color:r,children:t.category}),e.jsx("span",{className:"text-xs text-white/30",children:"Featured"}),t.readingTime&&e.jsxs("span",{className:"text-xs text-white/30 flex items-center gap-1 ml-auto",children:[e.jsx(E,{size:10}),t.readingTime," min read"]})]}),e.jsx("h3",{className:"font-heading font-bold text-white text-lg mb-2 leading-tight",children:t.title}),e.jsx("p",{className:"text-sm text-white/60 leading-relaxed mb-4",children:t.summary}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mb-4",children:t.tags.map(a=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs",style:{background:`${r}15`,color:`${r}cc`},children:a},a))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/40",children:t.source}),e.jsx("span",{className:"text-xs text-white/20",children:"|"}),e.jsxs("span",{className:"text-xs text-white/40 flex items-center gap-1",children:[e.jsx(v,{size:10}),q(t.publishedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),o(t.id)},className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:d?e.jsx(g,{size:18,style:{color:r},className:"fill-current"}):e.jsx(g,{size:18,className:"text-white/40"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),m(t)},className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(M,{size:18,className:"text-white/40"})})]})]})]})]}):e.jsx(k,{padding:"p-0",className:"overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-1 flex-shrink-0",style:{background:r}}),e.jsx("div",{className:"flex-1 p-4 cursor-pointer",onClick:()=>l(t),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx(L,{color:r,children:t.category}),t.readingTime&&e.jsxs("span",{className:"text-[10px] text-white/30 flex items-center gap-0.5",children:[e.jsx(E,{size:9}),t.readingTime,"m"]})]}),e.jsx("h4",{className:"font-medium text-white text-sm leading-tight mb-1.5",children:t.title}),e.jsx("p",{className:"text-xs text-white/50 leading-relaxed line-clamp-2 mb-2",children:t.summary}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:t.tags.slice(0,3).map(a=>e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px]",style:{background:`${r}10`,color:`${r}aa`},children:a},a))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-white/30",children:t.source}),e.jsx("span",{className:"text-xs text-white/15",children:"|"}),e.jsxs("span",{className:"text-xs text-white/30 flex items-center gap-1",children:[e.jsx(v,{size:9}),q(t.publishedAt)]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-0.5 flex-shrink-0",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),o(t.id)},className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:d?e.jsx(g,{size:16,style:{color:r},className:"fill-current"}):e.jsx(g,{size:16,className:"text-white/30"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),m(t)},className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(M,{size:16,className:"text-white/30"})})]})]})})]})})}function xe({article:t,isBookmarked:d,onToggleBookmark:o,onShare:m,onClose:l}){var r;const n=R[t.category]||N.primary;return e.jsx("div",{className:"fixed inset-0 z-50 bg-[#0f172a] overflow-y-auto",onClick:l,children:e.jsxs("div",{className:"min-h-full",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"sticky top-0 z-10 bg-[#0f172a]/95 backdrop-blur-lg border-b border-white/5",children:e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 max-w-2xl mx-auto",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx(te,{size:20}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(t.id),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:d?e.jsx(g,{size:18,style:{color:n},className:"fill-current"}):e.jsx(g,{size:18,className:"text-white/40"})}),e.jsx("button",{onClick:()=>m(t),className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:e.jsx(M,{size:18,className:"text-white/40"})})]})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto px-5 pt-6 pb-16",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(L,{color:n,children:t.category}),t.readingTime&&e.jsxs("span",{className:"text-xs text-white/40 flex items-center gap-1",children:[e.jsx(E,{size:12}),t.readingTime," min read"]})]}),e.jsx("h1",{className:"text-2xl font-heading font-bold text-white mb-4 leading-tight",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/40 mb-6 pb-6 border-b border-white/5",children:[e.jsx("span",{className:"font-medium text-white/60",children:t.source}),e.jsx("span",{className:"text-white/20",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{size:12}),q(t.publishedAt)]})]}),e.jsx("div",{className:"rounded-xl p-4 mb-6",style:{background:`${n}10`,borderLeft:`3px solid ${n}`},children:e.jsx("p",{className:"text-sm text-white/70 leading-relaxed italic",children:t.summary})}),t.content?e.jsx("div",{className:"prose prose-invert max-w-none",children:t.content.split(`

`).map((a,x)=>e.jsx("p",{className:"text-[15px] text-white/70 leading-relaxed mb-4",children:a},x))}):t.url&&t.url!=="#"?e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-5 py-3 rounded-xl text-sm font-medium text-white transition-all hover:opacity-90",style:{background:"linear-gradient(135deg, #6366f1, #8b5cf6)"},children:[e.jsx(ae,{size:16}),"Read Full Article"]}):null,e.jsxs("div",{className:"flex flex-wrap gap-2 mt-8 pt-6 border-t border-white/5",children:[e.jsx(ne,{size:14,className:"text-white/30"}),(r=t.tags)==null?void 0:r.map(a=>e.jsx("span",{className:"px-3 py-1 rounded-full text-xs",style:{background:`${n}15`,color:`${n}cc`},children:a},a))]})]})]})})}function ke(){const[t,d]=T($.news,"articles",[]),[o,m]=T($.news,"lastFetch",0),[l,n]=T($.news,"bookmarks",[]),[r,a]=h.useState("All"),[x,p]=h.useState(""),[f,j]=h.useState(null),[u,O]=h.useState(!1),[U,C]=h.useState(null),B=h.useCallback(async()=>{O(!0),C(null);try{const s=await ce();d(s),m(Date.now())}catch(s){C(s.message||"Failed to fetch articles")}finally{O(!1)}},[d,m]);h.useEffect(()=>{(t.length===0||Date.now()-o>de)&&B()},[]);const w=h.useMemo(()=>{let s=t;if(r!=="All"&&(s=s.filter(i=>i.category===r)),x.trim()){const i=x.toLowerCase();s=s.filter(c=>{var y;return c.title.toLowerCase().includes(i)||c.summary.toLowerCase().includes(i)||((y=c.tags)==null?void 0:y.some(V=>V.toLowerCase().includes(i)))})}return s},[t,r,x]),D=h.useMemo(()=>w.filter(s=>s.featured),[w]),S=h.useMemo(()=>w.filter(s=>!s.featured),[w]);function A(s){n(i=>i.includes(s)?i.filter(c=>c!==s):[...i,s])}function z(s){navigator.share?navigator.share({title:s.title,text:s.summary,url:s.url||window.location.href}).catch(()=>{}):navigator.clipboard.writeText(`${s.title}
${s.summary}`).then(()=>{const i=document.createElement("div");i.textContent="Copied to clipboard!",i.className="fixed bottom-24 left-1/2 -translate-x-1/2 glass-card-sm px-4 py-2 text-sm text-white z-50",document.body.appendChild(i),setTimeout(()=>i.remove(),2e3)}).catch(()=>{})}const I=l.length,_=h.useMemo(()=>{const s={};return F.forEach(i=>{i==="All"?s[i]=t.length:s[i]=t.filter(c=>c.category===i).length}),s},[t]),Q=h.useMemo(()=>{if(!o)return null;const s=Date.now()-o,i=Math.floor(s/6e4);if(i<1)return"Updated just now";if(i<60)return`Updated ${i}m ago`;const c=Math.floor(i/60);return c<24?`Updated ${c}h ago`:`Updated ${Math.floor(c/24)}d ago`},[o]);return f?e.jsx(xe,{article:f,isBookmarked:l.includes(f.id),onToggleBookmark:A,onShare:z,onClose:()=>j(null)}):e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsx(K,{title:"News Feed",subtitle:"Curated articles for your interests",rightElement:e.jsxs("button",{onClick:B,disabled:u,className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-indigo-500/15 hover:bg-indigo-500/25 border border-indigo-500/20 transition-all disabled:opacity-50",children:[e.jsx(J,{size:14,className:`text-indigo-400 ${u?"animate-spin":""}`}),e.jsx("span",{className:"text-xs font-medium text-indigo-400",children:"Refresh"})]})}),t.length>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-white/30 px-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(v,{size:11}),Q]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(g,{size:11}),I," saved"]})]}),U&&e.jsx(k,{className:"border border-red-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(se,{size:18,className:"text-red-400 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-sm text-red-400",children:U})}),e.jsx("button",{onClick:()=>C(null),className:"text-white/40 hover:text-white/60",children:e.jsx(Y,{size:16})})]})}),u&&e.jsxs(k,{className:"text-center py-8",children:[e.jsx(X,{size:24,className:"text-indigo-400 mx-auto mb-3 animate-spin"}),e.jsx("p",{className:"text-sm text-white/50",children:"Generating personalized articles..."})]}),t.length>0&&e.jsxs("div",{className:"sticky top-0 z-30 -mx-5 px-5 pt-2 pb-3 bg-[#0f172a]/95 backdrop-blur-lg",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(W,{size:16,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{type:"text",value:x,onChange:s=>p(s.target.value),placeholder:"Search articles...",className:"glass-input text-sm pl-10"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar",children:F.map(s=>{const i=R[s],c=r===s,y=_[s];return e.jsxs("button",{onClick:()=>a(s),className:`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all flex-shrink-0 ${c?"text-white shadow-lg":"text-white/50 hover:text-white/70"}`,style:{background:c?`${i}30`:"rgba(255,255,255,0.04)",border:`1px solid ${c?`${i}50`:"rgba(255,255,255,0.06)"}`,color:c?i:void 0,boxShadow:c?`0 2px 12px ${i}20`:"none"},children:[s,y>0&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full font-bold",style:{background:c?`${i}30`:"rgba(255,255,255,0.08)"},children:y})]},s)})})]}),D.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(ee,{size:16,className:"text-indigo-400"}),"Featured"]}),e.jsx("div",{className:"space-y-3",children:D.map(s=>e.jsx(H,{article:s,isBookmarked:l.includes(s.id),onToggleBookmark:A,onShare:z,onSelect:j,featured:!0},s.id))})]}),S.length>0?e.jsxs("div",{children:[e.jsxs("h3",{className:"font-heading font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx(P,{size:16,className:"text-white/40"}),"Latest Articles",e.jsxs("span",{className:"text-xs text-white/30 font-normal",children:["(",S.length,")"]})]}),e.jsx("div",{className:"space-y-3",children:S.map(s=>e.jsx(H,{article:s,isBookmarked:l.includes(s.id),onToggleBookmark:A,onShare:z,onSelect:j},s.id))})]}):!u&&t.length>0&&w.length===0&&e.jsx(Z,{icon:P,title:"No articles found",description:x?`No articles match "${x}"`:`No articles in ${r} category`,action:{label:"View All",onClick:()=>{a("All"),p("")}}})]})}export{ke as default};
